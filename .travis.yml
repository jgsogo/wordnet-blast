language: python
os: linux
dist: trusty
sudo: true

matrix:
  include:
    # Clang 5.0
    - env: CXX=clang++-5.0 CC=clang-5.0
      addons: { apt: { packages: ["clang-5.0", "valgrind"], sources: ["ubuntu-toolchain-r-test", "llvm-toolchain-trusty-5.0"] } }
    # GCC 6
    - env: CXX=g++-6  CC=gcc-6
      addons: { apt: { packages: ["g++-6", "valgrind"], sources: ["ubuntu-toolchain-r-test"] } }
      
      
script:
  - pip install conan --upgrade
  - conan user
  - conan install boost/1.66.0@conan/stable
  - ls -la
  - BOOST_ROOT="$(python boost_root.py)"
  - mkdir build && cd build
  - cmake .. -DBOOST_ROOT:PATH=$BOOST_ROOT -DBUILD_TESTS:BOOL=ON -DCMAKE_INSTALL_PREFIX:PATH=install
  - cmake --build . --target install
